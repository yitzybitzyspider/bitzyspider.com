<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Yitzy Rosenberg | I Untangle Wicked Problems</title>
    <meta name="description" content="Systems Engineer. 2x Founder. Growth Strategist. From water infrastructure for 10M people to optimizing startup operations." />

    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />

    <!-- Open Graph / Social Sharing -->
    <meta property="og:type" content="website" />
    <meta property="og:title" content="Yitzy Rosenberg | I Untangle Wicked Problems" />
    <meta property="og:description" content="Systems Engineer. 2x Founder. Growth Strategist. From water infrastructure for 10M people to optimizing startup operations." />
    <meta property="og:image" content="/photos/professional-headshot.jpg" />
    <meta property="og:url" content="https://bitzyspider.com" />
    <meta property="og:site_name" content="BitzySpider.com" />

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="Yitzy Rosenberg | I Untangle Wicked Problems" />
    <meta name="twitter:description" content="Systems Engineer. 2x Founder. Growth Strategist. From water infrastructure for 10M people to optimizing startup operations." />
    <meta name="twitter:image" content="/photos/professional-headshot.jpg" />

    <!-- Theme Color -->
    <meta name="theme-color" content="#000000" />
    <script type="module" src="/src/main.tsx"></script>
  </head>

  <body>
    <div id="root"></div>
    <script>
    // Mobile Spider: corner web, dangle, fly chase, tap-to-interact
    (function(){
      function isMobile(){return 'ontouchstart' in window || navigator.maxTouchPoints > 0}
      if(!isMobile()) return;

      var ready = false;
      var origCanvas = null;
      var counterEl = null;

      // Wait for React to render the spider canvas
      var poll = setInterval(function(){
        var c = document.querySelector('canvas');
        if(c){
          clearInterval(poll);
          origCanvas = c;
          // Counter is the next sibling div
          counterEl = c.nextElementSibling;
          init();
        }
      }, 200);

      function init(){
        // Hide the full-screen spider & counter on mobile
        origCanvas.style.display = 'none';
        if(counterEl) counterEl.style.display = 'none';
        document.body.style.cursor = 'auto';

        // Corner canvas - top-right
        var W = 140, H = 180;
        var dpr = window.devicePixelRatio || 1;
        var cvs = document.createElement('canvas');
        cvs.id = 'corner-spider';
        cvs.width = W * dpr;
        cvs.height = H * dpr;
        cvs.style.cssText = 'position:fixed;top:0;right:0;width:'+W+'px;height:'+H+'px;z-index:55;touch-action:none;';
        document.body.appendChild(cvs);
        var ctx = cvs.getContext('2d');
        ctx.scale(dpr, dpr);

        // Tap hint
        var hint = document.createElement('div');
        hint.textContent = 'tap the spider';
        hint.style.cssText = 'position:fixed;top:'+(H+4)+'px;right:8px;z-index:55;font-family:monospace;font-size:10px;color:rgba(255,255,255,0.3);pointer-events:none;transition:opacity 1s;';
        document.body.appendChild(hint);
        setTimeout(function(){ hint.style.opacity = '0'; }, 4000);
        setTimeout(function(){ hint.remove(); }, 5500);

        // State
        var anchorX = W - 12, anchorY = 0;
        var threadLen = 55;
        var sway = 0, swaySpeed = 0.015, swayAmp = 5;
        var spX = anchorX, spY = anchorY + threadLen;
        var idle = true;
        var idleStart = Date.now();
        var FLY_DELAY = 60000; // 1 min

        // Fly state
        var flyActive = false;
        var flyX = 0, flyY = 0, flyVx = 0, flyVy = 0;
        var flyAngle = 0;
        var chasing = false;
        var chaseSp = {x: spX, y: spY};
        var catchCount = 0;
        var catchFlash = 0;
        var flyRespawnTimer = 0;

        // Full-screen mode state
        var fullscreen = false;
        var returnTimer = null;

        // Draw web in corner
        function drawWeb(ctx){
          var cx = W, cy = 0; // top-right corner
          var rings = 4;
          var spokes = 7;
          var maxR = 50;

          ctx.strokeStyle = 'rgba(255,255,255,0.12)';
          ctx.lineWidth = 0.7;

          // Spokes
          for(var s = 0; s < spokes; s++){
            var a = (Math.PI / 2) + (s / (spokes - 1)) * (Math.PI / 2); // PI/2 to PI
            ctx.beginPath();
            ctx.moveTo(cx, cy);
            ctx.lineTo(cx + Math.cos(a) * maxR, cy + Math.sin(a) * maxR);
            ctx.stroke();
          }

          // Rings
          for(var r = 1; r <= rings; r++){
            var rad = (r / rings) * maxR;
            ctx.beginPath();
            for(var s = 0; s <= spokes * 4; s++){
              var a = (Math.PI / 2) + (s / (spokes * 4)) * (Math.PI / 2);
              var wobble = Math.sin(s * 2.5 + r) * 2;
              var px = cx + Math.cos(a) * (rad + wobble);
              var py = cy + Math.sin(a) * (rad + wobble);
              if(s === 0) ctx.moveTo(px, py);
              else ctx.lineTo(px, py);
            }
            ctx.stroke();
          }
        }

        // Draw mini spider
        function drawSpider(ctx, x, y, angle){
          ctx.save();
          ctx.translate(x, y);
          ctx.rotate(angle || 0);

          // Body
          ctx.fillStyle = '#555';
          ctx.beginPath();
          ctx.ellipse(0, 0, 5, 6, 0, 0, Math.PI * 2);
          ctx.fill();

          // Head
          ctx.fillStyle = '#333';
          ctx.beginPath();
          ctx.arc(0, -7, 3.5, 0, Math.PI * 2);
          ctx.fill();

          // Eyes
          ctx.fillStyle = '#fff';
          ctx.beginPath();
          ctx.arc(-1.5, -8, 1.2, 0, Math.PI * 2);
          ctx.arc(1.5, -8, 1.2, 0, Math.PI * 2);
          ctx.fill();
          ctx.fillStyle = '#000';
          ctx.beginPath();
          ctx.arc(-1.5, -8.2, 0.6, 0, Math.PI * 2);
          ctx.arc(1.5, -8.2, 0.6, 0, Math.PI * 2);
          ctx.fill();

          // Legs (4 per side)
          ctx.strokeStyle = '#555';
          ctx.lineWidth = 1;
          var legAngles = [-0.8, -0.4, 0.1, 0.5];
          for(var i = 0; i < legAngles.length; i++){
            var la = legAngles[i];
            var wave = Math.sin(Date.now() * 0.003 + i * 1.5) * 2;
            // Right
            ctx.beginPath();
            ctx.moveTo(3, la * 8);
            ctx.quadraticCurveTo(10 + wave, la * 8 - 3, 13 + wave, la * 8 + 4);
            ctx.stroke();
            // Left
            ctx.beginPath();
            ctx.moveTo(-3, la * 8);
            ctx.quadraticCurveTo(-10 - wave, la * 8 - 3, -13 - wave, la * 8 + 4);
            ctx.stroke();
          }

          // Fangs
          ctx.fillStyle = '#c33';
          ctx.beginPath();
          ctx.moveTo(-1, -10);
          ctx.lineTo(-0.3, -12);
          ctx.lineTo(0.4, -10);
          ctx.fill();
          ctx.beginPath();
          ctx.moveTo(1, -10);
          ctx.lineTo(1.7, -12);
          ctx.lineTo(2.4, -10);
          ctx.fill();

          ctx.restore();
        }

        // Draw fly
        function drawFly(ctx, x, y){
          ctx.save();
          ctx.translate(x, y);
          flyAngle += 0.3;

          // Wings
          var wf = Math.sin(flyAngle) * 0.4;
          ctx.fillStyle = 'rgba(255,255,255,0.25)';
          ctx.beginPath();
          ctx.ellipse(-3, -1, 4, 2, -0.5 + wf, 0, Math.PI * 2);
          ctx.fill();
          ctx.beginPath();
          ctx.ellipse(3, -1, 4, 2, 0.5 - wf, 0, Math.PI * 2);
          ctx.fill();

          // Body
          ctx.fillStyle = '#888';
          ctx.beginPath();
          ctx.ellipse(0, 0, 2, 3, 0, 0, Math.PI * 2);
          ctx.fill();

          // Eyes
          ctx.fillStyle = '#c33';
          ctx.beginPath();
          ctx.arc(-1, -3, 0.8, 0, Math.PI * 2);
          ctx.arc(1, -3, 0.8, 0, Math.PI * 2);
          ctx.fill();

          ctx.restore();
        }

        function spawnFly(){
          flyActive = true;
          flyX = Math.random() * (W - 40) + 20;
          flyY = Math.random() * (H - 60) + 40;
          flyVx = (Math.random() - 0.5) * 1.5;
          flyVy = (Math.random() - 0.5) * 1.5;
          chasing = false;
        }

        function animate(){
          if(fullscreen) return;

          ctx.clearRect(0, 0, W, H);
          drawWeb(ctx);

          sway += swaySpeed;

          // Check if fly should appear
          if(!flyActive && Date.now() - idleStart > FLY_DELAY){
            spawnFly();
          }

          if(!flyActive && !chasing){
            // Idle: spider dangles from web
            var swayOffset = Math.sin(sway) * swayAmp;
            spX = anchorX + swayOffset;
            spY = anchorY + threadLen;

            // Draw thread
            ctx.strokeStyle = 'rgba(255,255,255,0.25)';
            ctx.lineWidth = 0.8;
            ctx.beginPath();
            ctx.moveTo(anchorX, anchorY);
            // Slight curve
            ctx.quadraticCurveTo(anchorX + swayOffset * 0.5, anchorY + threadLen * 0.5, spX, spY - 7);
            ctx.stroke();

            drawSpider(ctx, spX, spY, 0);
          } else if(flyActive){
            // Move fly erratically
            flyVx += (Math.random() - 0.5) * 0.4;
            flyVy += (Math.random() - 0.5) * 0.4;
            flyVx = Math.max(-2, Math.min(2, flyVx));
            flyVy = Math.max(-2, Math.min(2, flyVy));
            flyX += flyVx;
            flyY += flyVy;

            // Bounce fly
            if(flyX < 5 || flyX > W - 5) flyVx *= -1;
            if(flyY < 5 || flyY > H - 5) flyVy *= -1;
            flyX = Math.max(5, Math.min(W - 5, flyX));
            flyY = Math.max(5, Math.min(H - 5, flyY));

            drawFly(ctx, flyX, flyY);

            // Spider starts chasing after a moment
            if(!chasing){
              chasing = true;
              chaseSp.x = spX;
              chaseSp.y = spY;
            }

            // Chase the fly
            var dx = flyX - chaseSp.x;
            var dy = flyY - chaseSp.y;
            var dist = Math.sqrt(dx * dx + dy * dy);
            var speed = 1.2;
            if(dist > 2){
              chaseSp.x += (dx / dist) * speed;
              chaseSp.y += (dy / dist) * speed;
            }

            // Thread from anchor to spider
            ctx.strokeStyle = 'rgba(255,255,255,0.15)';
            ctx.lineWidth = 0.6;
            ctx.beginPath();
            ctx.moveTo(anchorX, anchorY);
            ctx.lineTo(chaseSp.x, chaseSp.y - 7);
            ctx.stroke();

            var angle = Math.atan2(dy, dx) - Math.PI / 2;
            drawSpider(ctx, chaseSp.x, chaseSp.y, angle);

            // Catch detection
            if(dist < 12){
              flyActive = false;
              chasing = false;
              catchCount++;
              catchFlash = 15;
              // Reset position back to dangle
              spX = anchorX;
              spY = anchorY + threadLen;
              // Respawn fly after a delay
              flyRespawnTimer = Date.now() + 8000;
            }
          }

          // Respawn fly
          if(!flyActive && flyRespawnTimer && Date.now() > flyRespawnTimer){
            spawnFly();
            flyRespawnTimer = 0;
          }

          // Catch flash
          if(catchFlash > 0){
            ctx.fillStyle = 'rgba(220,38,38,' + (catchFlash / 15 * 0.5) + ')';
            ctx.font = 'bold 10px monospace';
            ctx.textAlign = 'center';
            ctx.fillText('+1', anchorX, anchorY + threadLen + 20);
            catchFlash--;
          }

          requestAnimationFrame(animate);
        }

        animate();

        // Tap spider to go fullscreen interactive
        cvs.addEventListener('touchstart', function(e){
          e.preventDefault();
          e.stopPropagation();

          // Check if tap is near the spider
          var rect = cvs.getBoundingClientRect();
          var tx = e.touches[0].clientX - rect.left;
          var ty = e.touches[0].clientY - rect.top;
          var curSpX = chasing ? chaseSp.x : spX;
          var curSpY = chasing ? chaseSp.y : spY;
          var d = Math.sqrt((tx - curSpX) * (tx - curSpX) + (ty - curSpY) * (ty - curSpY));

          if(d < 40){
            enterFullscreen();
          }
        });

        function enterFullscreen(){
          fullscreen = true;
          cvs.style.display = 'none';

          origCanvas.style.display = '';
          if(counterEl) counterEl.style.display = '';

          // Auto-return to corner after 15s of no touch
          clearTimeout(returnTimer);
          var touchActive = false;

          function onTouch(){
            touchActive = true;
            clearTimeout(returnTimer);
            returnTimer = setTimeout(function(){
              if(!touchActive) exitFullscreen();
              touchActive = false;
            }, 15000);
          }

          function exitFullscreen(){
            origCanvas.style.display = 'none';
            if(counterEl) counterEl.style.display = 'none';
            document.body.style.cursor = 'auto';

            fullscreen = false;
            cvs.style.display = '';
            idleStart = Date.now();
            flyActive = false;
            chasing = false;
            sway = 0;

            document.removeEventListener('touchstart', onTouch);
            document.removeEventListener('touchmove', onTouchMove);
            animate();
          }

          function onTouchMove(){ onTouch(); }

          document.addEventListener('touchstart', onTouch);
          document.addEventListener('touchmove', onTouchMove);

          // Start the inactivity timer
          returnTimer = setTimeout(function(){
            exitFullscreen();
          }, 15000);
        }
      }
    })();
    </script>
  </body>
</html>
